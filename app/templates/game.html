<canvas id="gc" width="400" height="400"></canvas>
<script>
window.onload=function() {
	canv=document.getElementById("gc");
	ctx=canv.getContext("2d");
	document.addEventListener("keydown",keyPush);
    setInterval(game,1000/15);
    
}
snake_x=snake_y=10;
grid_side=tile_count=20;
food_x=food_y=15;
speed_x=speed_y=0;
trail=[];
tail = 5;
function game() {
	snake_x+=speed_x;
	snake_y+=speed_y;
	if(snake_x<0) {
		snake_x= tile_count-1;
	}
	if(snake_x>tile_count-1) {
		snake_x= 0;
	}
	if(snake_y<0) {
		snake_y= tile_count-1;
	}
	if(snake_y>tile_count-1) {
		snake_y= 0;
	}
	ctx.fillStyle="black";
	ctx.fillRect(0,0,canv.width,canv.height);

	ctx.fillStyle="lime";
	for(var i=0;i<trail.length;i++) {
		ctx.fillRect(trail[i].x*grid_side,trail[i].y*grid_side,grid_side-2,grid_side-2);
		if(trail[i].x==snake_x && trail[i].y==snake_y) {
			tail = 5;
		}
	}
	trail.push({x:snake_x,y:snake_y});
	while(trail.length>tail) {
	trail.shift();
	}

	if(food_x==snake_x && food_y==snake_y) {
		tail++;
		food_x=Math.floor(Math.random()*tile_count);
		food_y=Math.floor(Math.random()*tile_count);
	}
	ctx.fillStyle="red";
	ctx.fillRect(food_x*grid_side,food_y*grid_side,grid_side-2,grid_side-2);
}
function keyPush(evt) {
	switch(evt.keyCode) {
		case 37:
			speed_x=-1;speed_y=0;
			break;
		case 38:
			speed_x=0;speed_y=-1;
			break;
		case 39:
			speed_x=1;speed_y=0;
			break;
		case 40:
			speed_x=0;speed_y=1;
			break;
	}
}
</script>

